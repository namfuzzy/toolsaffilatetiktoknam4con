300<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Affitok Win - Prompt Studio</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Remix Icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>

  <!-- App CSS -->
  <link rel="stylesheet" href="assets/css/global.css"/>
  <link rel="stylesheet" href="assets/css/layout.css"/>
  <link rel="stylesheet" href="assets/css/components.css"/>
  <link rel="stylesheet" href="assets/css/pages.css"/>

  <!-- (CSS Mới cho trang này sẽ được thêm vào assets/css/pages.css sau) -->

</head>
<body class="app-layout">
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar__logo">
      <i class="ri-rocket-2-fill sidebar__logo-icon"></i>
      <span class="sidebar__logo-text">Affitok Win</span>
    </div>

    <nav class="sidebar__nav">
      <!-- Core -->
      <div class="sidebar__nav-group">
        <h3 class="sidebar__nav-title" data-i18n-key="sidebar.group.core">Chức năng chính</h3>
        <ul class="sidebar__nav-list">
          <li><a class="sidebar__nav-link" href="index.html" data-page-id="dashboard"><i class="ri-dashboard-3-line"></i><span data-i18n-key="sidebar.dashboard">Tổng quan</span></a></li>
          <li><a class="sidebar__nav-link" href="prompt-studio.html" data-page-id="prompt-studio"><i class="ri-quill-pen-line"></i><span data-i18n-key="sidebar.promptStudio">Prompt Studio</span></a></li>
          <li><a class="sidebar__nav-link" href="video-factory.html" data-page-id="video-factory"><i class="ri-movie-2-line"></i><span data-i18n-key="sidebar.videoFactory">Video Factory</span></a></li>
        </ul>
      </div>

      <!-- Posting -->
      <div class="sidebar__nav-group">
        <h3 class="sidebar__nav-title" data-i18n-key="sidebar.group.posting">Đăng bài</h3>
        <ul class="sidebar__nav-list">
          <li><a class="sidebar__nav-link" href="facebook-poster.html" data-page-id="facebook-poster"><i class="ri-facebook-box-line"></i><span data-i18n-key="sidebar.fbPoster">Đăng Facebook</span></a></li>
          <li><a class="sidebar__nav-link" href="tiktok-uploader.html" data-page-id="tiktok-uploader"><i class="ri-tiktok-line"></i><span data-i18n-key="sidebar.tkUploader">Đăng TikTok</span></a></li>
          <li><a class="sidebar__nav-link" href="scheduler.html" data-page-id="scheduler"><i class="ri-calendar-event-line"></i><span data-i18n-key="sidebar.scheduler">Lịch đăng</span></a></li>
        </ul>
      </div>

      <!-- Affiliate -->
      <div class="sidebar__nav-group">
        <h3 class="sidebar__nav-title" data-i18n-key="sidebar.group.affiliate">Affiliate</h3>
        <ul class="sidebar__nav-list">
          <li><a class="sidebar__nav-link" href="affiliate-dashboard.html" data-page-id="affiliate-dashboard"><i class="ri-pie-chart-line"></i><span data-i18n-key="sidebar.affDashboard">Tổng quan (Aff)</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-campaigns.html" data-page-id="affiliate-campaigns"><i class="ri-megaphone-line"></i><span data-i18n-key="sidebar.affCampaigns">Chiến dịch</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-links.html" data-page-id="affiliate-links"><i class="ri-links-line"></i><span data-i18n-key="sidebar.affLinks">Trình tạo Link</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-reports.html" data-page-id="affiliate-reports"><i class="ri-file-chart-line"></i><span data-i18n-key="sidebar.affReports">Báo cáo</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-payouts.html" data-page-id="affiliate-payouts"><i class="ri-wallet-3-line"></i><span data-i18n-key="sidebar.affPayouts">Thanh toán</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-assets.html" data-page-id="affiliate-assets"><i class="ri-image-line"></i><span data-i18n-key="sidebar.affAssets">Tài nguyên</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-networks.html" data-page-id="affiliate-networks"><i class="ri-global-line"></i><span data-i18n-key="sidebar.affNetworks">Mạng liên kết</span></a></li>
          <li><a class="sidebar__nav-link" href="affiliate-compliance.html" data-page-id="affiliate-compliance"><i class="ri-shield-check-line"></i><span data-i18n-key="sidebar.affCompliance">Tuân thủ</span></a></li>
        </ul>
      </div>

      <!-- Management -->
      <div class="sidebar__nav-group">
        <h3 class="sidebar__nav-title" data-i18n-key="sidebar.group.management">Quản lý</h3>
        <ul class="sidebar__nav-list">
          <li><a class="sidebar__nav-link" href="templates.html" data-page-id="templates"><i class="ri-layout-grid-line"></i><span data-i18n-key="sidebar.templates">Mẫu nội dung</span></a></li>
          <li><a class="sidebar__nav-link" href="library.html" data-page-id="library"><i class="ri-gallery-line"></i><span data-i18n-key="sidebar.library">Thư viện</span></a></li>
          <li><a class="sidebar__nav-link" href="analytics.html" data-page-id="analytics"><i class="ri-bar-chart-2-line"></i><span data-i18n-key="sidebar.analytics">Báo cáo (MXH)</span></a></li>
        </ul>
      </div>

      <!-- System -->
      <div class="sidebar__nav-group">
        <h3 class="sidebar__nav-title" data-i18n-key="sidebar.group.system">Hệ thống</h3>
        <ul class="sidebar__nav-list">
          <li><a class="sidebar__nav-link" href="accounts.html" data-page-id="accounts"><i class="ri-account-box-line"></i><span data-i18n-key="sidebar.accounts">Tài khoản kết nối</span></a></li>
          <li><a class="sidebar__nav-link" href="logs.html" data-page-id="logs"><i class="ri-bug-line"></i><span data-i18n-key="sidebar.logs">Nhật ký & Lỗi</span></a></li>
          <li><a class="sidebar__nav-link" href="settings.html" data-page-id="settings"><i class="ri-settings-3-line"></i><span data-i18n-key="sidebar.settings">Cài đặt</span></a></li>
          <li><a class="sidebar__nav-link" href="help.html" data-page-id="help"><i class="ri-question-line"></i><span data-i18n-key="sidebar.help">Trợ giúp</span></a></li>
        </ul>
      </div>
    </nav>

    <div class="sidebar__footer">
      Affitok Win v3.0.0<br/>© 2025
    </div>
  </aside>

  <div class="sidebar-overlay" id="sidebar-overlay"></div>

  <div class="main-container">
    <header class="header" id="header">
      <div class="header__left">
        <button class="header__menu-toggle" id="menu-toggle" aria-label="Mở menu">
          <i class="ri-menu-2-line"></i>
        </button>

        <nav class="breadcrumb" id="breadcrumb">
          <span class="breadcrumb__item" data-i18n-key="breadcrumb.home">Affitok</span>
          <i class="ri-arrow-right-s-line breadcrumb__divider"></i>
          <span class="breadcrumb__item" id="breadcrumb-current" data-i18n-key="sidebar.promptStudio">Prompt Studio</span>
        </nav>
      </div>

      <!-- [MỤC 2.1] CHIP TRẠNG THÁI (UI MỚI) -->
      <div class="header__center">
        <div class="status-chip" id="ps-status-chip" title="Cài đặt API (Sẽ làm ở bước sau)">
            <span class="status-chip__dot gemini"></span>
            <span class="status-chip__text">Gemini • <span id="ps-status-model">gemini-2.5-pro</span></span>
        </div>
      </div>

      <div class="header__right">
        <!-- [MỤC 2.1] NÚT TẠO MỚI -->
        <button class="btn btn-secondary" id="ps-btn-new">
          <i class="ri-add-line"></i>
          <span data-i18n-key="header.create">Tạo mới</span>
        </button>
        <button class="header__action-btn" data-i18n-aria-label="header.notifications">
          <i class="ri-notification-3-line"></i>
        </button>
        <!-- Nút Cài đặt gốc (dùng cho settings-mini.js) -->
        <a class="header__action-btn" href="settings.html" data-i18n-aria-label="header.settings" data-action="open-settings">
          <i class="ri-settings-3-line"></i>
        </a>
        <div class="header__avatar" data-i18n-aria-label="header.account">AV</div>
      </div>
    </header>

    <!-- [MỤC 2] CẤU TRÚC UI TRANG (UI MỚI) -->
    <main class="content" id="prompt-studio-root">
      <section class="page active" id="page-prompt-studio">
        <div class="ps-layout">
          
          <!-- CỘT BÊN TRÁI: INPUT -->
          <div class="ps-layout__main">
            
            <!-- [MỤC 2.2] PRESET & MỤC TIÊU -->
            <div class="card" id="ps-preset-card">
              <div class="card__header">
                <h2 class="card__title" data-i18n-key="ps.presetTitle">Preset & Mục tiêu</h2>
              </div>
              <div class="card__body">
                <div class="form-grid">
                  <div class="form-group" style="grid-column: 1 / -1;">
                    <label for="ps-preset" class="form-label" data-i18n-key="ps.preset">Preset (Công thức)</label>
                    <select id="ps-preset" class="form-control">
                      <option value="" data-i18n-key="ps.presetSelect">-- Vui lòng chọn Preset --</option>
                      <!-- JS sẽ điền phụ lục vào đây -->
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label for="ps-voice" class="form-label" data-i18n-key="ps.voice">Giọng điệu</label>
                    <select id="ps-voice" class="form-control">
                      <option value="Chuyên gia">Chuyên gia</option>
                      <option value="Gen Z">Gen Z</option>
                      <option value="Hài hước">Hài hước</option>
                      <option value="Ấm áp">Ấm áp</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="ps-angle" class="form-label" data-i18n-key="ps.angle">Góc tiếp cận</label>
                    <select id="ps-angle" class="form-control">
                      <option value="Giá trị">Giá trị</option>
                      <option value="Tiện lợi">Tiện lợi</option>
                      <option value="Tiết kiệm">Tiết kiệm</option>
                      <option value="So sánh">So sánh</option>
                      <option value="Đập tan nghi ngờ">Đập tan nghi ngờ</option>
                    </select>
                  </div>
                   <div class="form-group">
                    <label for="ps-variants" class="form-label" data-i18n-key="ps.variants">Số biến thể (A/B)</label>
                    <select id="ps-variants" class="form-control">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>
                   <div class="form-group">
                    <label for="ps-length" class="form-label" data-i18n-key="ps.length">Độ dài</label>
                    <select id="ps-length" class="form-control">
                      <option value="Ngắn">Ngắn</option>
                      <option value="Vừa">Vừa (Mặc định)</option>
                      <option value="Dài">Dài</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- [MỤC 2.3] BIẾN ĐẦU VÀO (FIELDS) -->
            <div class="card" id="ps-fields-card">
              <div class="card__header">
                <h2 class="card__title" data-i18n-key="ps.fieldsTitle">Biến đầu vào</h2>
              </div>
              <div class="card__body">
                <div class="form-grid" id="ps-fields-container">
                  <!-- JS sẽ điền các field (product_name, target_audience, v.v.) vào đây -->
                  <div class="ps-field-placeholder" data-i18n-key="ps.fieldsPlaceholder">
                    Vui lòng chọn một Preset ở trên để hiển thị các trường nhập liệu.
                  </div>
                </div>
              </div>
            </div>

            <!-- [MỤC 2.4] ẢNH ĐẦU VÀO (IMAGE ASSIST) -->
            <div class="card" id="ps-image-card">
              <div class="card__header">
                <h2 class="card__title" data-i18n-key="ps.imageTitle">Hỗ trợ bằng ảnh (Image Assist)</h2>
                <button class="btn btn-secondary btn-sm" id="ps-image-add-btn">
                    <i class="ri-image-add-line"></i> <span data-i18n-key="ps.imageAdd">Thêm ảnh</span>
                </button>
              </div>
              <div class="card__body">
                <input type="file" id="ps-image-input" multiple accept="image/*" style="display:none;">
                
                <!-- Khu vực kéo thả & thumbnails -->
                <div class="ps-image-dropzone" id="ps-image-dropzone">
                  <i class="ri-upload-cloud-2-line"></i>
                  <p data-i18n-key="ps.imageDrop">Kéo & thả (tối đa 4 ảnh) vào đây, hoặc nhấn "Thêm ảnh"</p>
                </div>
                <div class="ps-image-preview-grid" id="ps-image-preview-grid">
                  <!-- JS sẽ điền các thumbnail ảnh vào đây -->
                </div>

                <!-- Tùy chọn ảnh -->
                <div class="ps-image-options" id="ps-image-options" style="display: none;">
                  <div class="form-group-inline">
                    <input type="checkbox" id="ps-image-ocr" class="form-checkbox">
                    <label for="ps-image-ocr" data-i18n-key="ps.imageOcr">Đọc chữ trong ảnh (OCR)</label>
                  </div>
                  <div class="form-group" style="margin-top: 1rem;">
                    <label class="form-label" data-i18n-key="ps.imageMode">Chế độ dùng ảnh:</label>
                    <select id="ps-image-mode" class="form-control">
                      <option value="merge_all" data-i18n-key="ps.imageModeMerge">Gộp tất cả ảnh &rarr; 1 kịch bản</option>
                      <option value="single_to_multiple" data-i18n-key="ps.imageModeSingle">1 ảnh = 1 biến thể</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- [MỤC 2.5] NÚT GENERATE -->
            <div class="ps-generate-footer">
                <button class="btn btn-primary btn-lg" id="ps-btn-generate">
                    <i class="ri-magic-line"></i>
                    <span data-i18n-key="ps.generate">Generate (Ctrl+Enter)</span>
                </button>
            </div>

          </div>
          
          <!-- CỘT BÊN PHẢI: OUTPUT -->
          <div class="ps-layout__side" id="ps-output-container">
            
            <!-- [MỤC 2.6] KẾT QUẢ -->
            <div class="card sticky-top">
              <div class="card__header">
                <h2 class="card__title" data-i18n-key="ps.resultsTitle">Kết quả</h2>
                <div class="ps-output-actions" id="ps-output-actions" style="display: none;">
                  <button class="btn btn-secondary btn-sm" id="ps-output-copy-all">
                    <i class="ri-file-copy-2-line"></i> <span data-i18n-key="ps.copyAll">Copy tất cả</span>
                  </button>
                </div>
              </div>
              
              <!-- Tabs Kết quả -->
              <nav class="tabs__nav" id="ps-output-tabs-nav" style="display: none;">
                <!-- JS sẽ điền các tab (Script, Caption, JSON...) vào đây -->
              </nav>

              <!-- Body Kết quả -->
              <div class="card__body" id="ps-output-body">
                
                <!-- Trạng thái rỗng (mục 2.6) -->
                <div class="ps-output-empty" id="ps-output-empty">
                  <i class="ri-file-list-3-line"></i>
                  <p data-i18n-key="ps.resultsEmpty">Kết quả sẽ xuất hiện ở đây sau khi bạn Generate.</p>
                </div>

                <!-- Khu vực chứa các tab content -->
                <div id="ps-output-tabs-content">
                  <!-- JS sẽ điền các .tabs__content (Script, Caption, JSON...) vào đây -->
                </div>
              </div>
              
              <!-- [MỤC 5] GHI CHÚ COMPLIANCE -->
              <div class="card__footer" id="ps-output-footer" style="display: none;">
                  <p class="ps-compliance-note" data-i18n-key="ps.complianceNote">
                    Ưu tiên lợi ích; hook 3-5s; CTA rõ; không claim quá đà; #quangcao #affiliate khi phù hợp.
                  </p>
              </div>
            </div>
            
          </div>

        </div>
      </section>
    </main>

    <footer class="footer">
      <span data-i18n-key="footer.copyright">© 2025 Affitok Win. Mọi quyền được bảo lưu.</span> | v3.0.0
    </footer>
  </div>

  <!-- ==== BOOTSTRAP SCRIPTS ==== -->
  <script> window.__PAGE_ID__ = 'prompt-studio'; </script>

  <!-- Core (UI/Mock/I18n) -->
  <script src="./assets/js/core/i18n.js?v=45script>
  <script src="./assets/js/core/theme.js?v=5"></script>
  <script src="./assets/js/core/nav.js?v=45script>
  <script src="./assets/js/core/mock-actions.5?v=4"></script>

  <!-- ENV + KV (cấu hình) -->
  <script src="./assets/js/core/env.js?v=45script>
  <!-- [YÊU CẦU 3] Dùng file kv.js được cung cấp -->
  <script src="./assets/js/core/kv.js?v=45script> 

  <!-- Network helpers (defines robustFetch) -->
  <script src="./assets/js/core/net-patch.5?v=4"></script>
  <!-- Services: proxy phải trước settings-mini để có robustFetch -->
  <script src="./assets/js/services/5?v=4"></script>

  <!-- Settings mini (dùng robustFetch) -->
  <!-- [YÊU CẦU 0] KHÔNG CAN THIỆP FILE NÀY -->
  <script src="./assets/js/core/5?v=4"></script>

  <!-- Model services (Không can thiệp logic gọi API) -->
  <script src="./assets/js/services/gemini.js?5=4"></script>
  <script src="./assets/js/services/5?v=4"></script>

  <!-- Page logic (File này sẽ được code ở Bước 2) -->
  <script src="./assets/js/pages/5?v=4"></script>
  <!-- ==== /BOOTSTRAP SCRIPTS ==== -->
</body>
</html>
